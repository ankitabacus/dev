<!-- <div class="{{login_data.access_level?'main-container':'main-container pl0'}}"> -->
    
    <div class="{{login_data.view_dashboard=='1' ? 'main-container':'main-container pl0'}}">
        <div *ngIf="loader">
            <mat-spinner class="loader">
                <div><p>Loading....</p></div>
            </mat-spinner>
        </div>
        <div class="container">
            <div class="cs-header">
                <div class="cs-back">
                    <a mat-button (click)="back()"><i class="material-icons">arrow_right_alt</i></a>
                </div>
                <div class="module-name">
                    <h2>Order Detail</h2>
                </div>
                <div class="left-auto" >
                    <div class="action-menu">
                        <button mat-raised-button color="accent"   color="accent"*ngIf="((login_data.access_level == '1' && order_detail.delivery_from=='Gravity') || (login_data.access_level != '1' && order_detail.delivery_from != 'Gravity')) && order_detail.order_status!='Dispatch'" (click)="openDialog()">
                            Change Status
                        </button>
                        <button mat-raised-button  color="accent" class="ml10" (click)="open_dipatch_model()"  *ngIf="order_detail.order_status!='Dispatch' && order_detail.order_status=='Approved'"> 
                            Dispatch Item
                        </button>
                        
                        <button mat-raised-button  color="accent" class="ml10" (click)="changeStatusToDispatch(order_detail.id)" *ngIf="order_detail.order_status!='Dispatch' && order_detail.order_status=='Approved'">
                            Dispatch Order
                        </button>
                    </div>
                </div>
            </div>
            <div class="scroll-body padding10">
                <div class="row" >
                    <div class="col s6">
                        <div class="details-info">
                            <div class="basic-details">
                                <div class="cs-heading">
                                    <h2>Order Details</h2>
                                </div>
                                <div class="cs-figure">
                                    <ul>
                                        <li class="w100" style="min-width: 100px;">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span> Date</span>
                                                    <p>{{order_detail.date_created  | date :' dd/MM/yyyy'}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Order ID</span>
                                                    <p>{{order_detail.order_no}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li *ngIf="order_detail.created_by_type != 'channel partner'">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Created By</span>
                                                    <p>{{order_detail.created_by_name}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        
                                        
                                        <li *ngIf="order_detail.delivery_from!='Gravity'">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Channel Partner</span>
                                                    <p>{{order_detail.distributor_name}}</p>
                                                    <a  class="one-edit" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(order_detail.created_by,'order_cp_edit')" *ngIf="login_data.access_level == '1'"><i class="material-icons">create</i></a>
                                                </div>
                                            </div>
                                        </li>
                                        
                                        
                                        <li class="w130 " style="min-width: 130px;" >
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Status</span>
                                                    <p>
                                                        <!-- {{order_detail.order_status == "Pending" ? 'Order Placed' : order_detail.order_status == 'Approved' ? 'Order Accepted' : order_detail.order_status}} -->
                                                        <ng-container *ngIf="order_detail.order_status == 'Pending'">
                                                            Order Placed
                                                        </ng-container>
                                                        <ng-container *ngIf="order_detail.order_status == 'Approved'">
                                                            Order Accepted
                                                        </ng-container>
                                                        <ng-container *ngIf="order_detail.order_status == 'Dispatch'">
                                                            Dispatched
                                                        </ng-container>
                                                        <ng-container *ngIf="order_detail.order_status == 'Reject' || order_detail.order_status == 'Rejected'">
                                                            Reffered Back
                                                        </ng-container>
                                                        <ng-container *ngIf="order_detail.order_status == 'Pre Close'">
                                                            Pre Closed
                                                        </ng-container>
                                                    </p>
                                                </div>
                                            </div>
                                        </li>
                                        
                                        <li *ngIf="order_detail.order_status=='Reject'">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Reason Of Reject</span>
                                                    <p>{{order_detail.reason_reject}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li *ngIf="order_detail.order_status=='Approved'">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Approved By</span>
                                                    <p>{{order_detail.approved_by_name}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        
                                    </ul>
                                    
                                    <ul class="mt10" >
                                        <li style="border: 1px solid #B29D9D;" *ngIf="order_detail.remark">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Accepted Remark</span>
                                                    <p *ngIf="order_detail.remark">{{order_detail.remark}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li style="border: 1px solid #B29D9D;" *ngIf="order_detail.preclose_remark">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Pre-Close Remark</span>
                                                    <p *ngIf="order_detail.remark">{{order_detail.preclose_remark}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li style="border: 1px solid #B29D9D;" *ngIf="order_detail.order_remark">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Order Remark</span>
                                                    <p *ngIf="order_detail.remark">{{order_detail.order_remark}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        
                                        
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="details-info mt10">
                            <div class="basic-details">
                                <div class="cs-heading">
                                    <h2>Transport Detail</h2>
                                </div>
                                <div class="cs-figure">
                                    <ul>
                                        <li>
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Transporter Name</span>
                                                    <p>{{!order_detail.transport_name ? ' N/A ' : order_detail.transport_name | titlecase }} </p>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Mobile</span>
                                                    <p>{{!order_detail.transport_mobile ? ' N/A ' : order_detail.transport_mobile  }} </p>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Address</span>
                                                    <p>{{!order_detail.transport_address ? ' N/A ' : order_detail.transport_address | titlecase }} </p>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                    <ul class="mt10">
                                        <li style="border: 1px solid #B29D9D;">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Private Marka</span>
                                                    <p>{{!order_detail.private_marka ? ' N/A ' : order_detail.private_marka | titlecase }} </p>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col s6">
                        <div class="details-info">
                            <div class="basic-details">
                                <div class="cs-heading">
                                    <h2 *ngIf="order_detail.delivery_from=='Gravity'">Channel Partner Detail</h2>
                                    <h2 *ngIf="order_detail.delivery_from!='Gravity'">Dealer Detail</h2>
                                </div>
                                <div class="cs-figure">
                                    <ul>
                                        <li>
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Company Name & type</span>
                                                    <p>
                                                        {{order_detail.dr_name}} 
                                                        ( <span style="color: #a800ff;" *ngIf="order_detail.type==1">Channel Partner</span>
                                                        <span style="color: #a800ff;" *ngIf="order_detail.type==7">Direct Dealer</span>
                                                        <span style="color: #a800ff;" *ngIf="order_detail.type==3">Dealer</span> )
                                                    </p>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="w200" style="min-width: 200px;">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>GST No.</span>
                                                    <p>{{order_detail.gst ? order_detail.gst : 'N/A'}}</p>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                    <ul class="mt10">
                                        <li style="border: 1px solid #B29D9D;">
                                            <div class="outer">
                                                <div class="inner">
                                                    <span>Address</span>
                                                    <p>{{order_detail.address ? order_detail.address : 'N/A'}} {{order_detail.city ? ', '+  order_detail.city : ''}} {{order_detail.district ? ', '+order_detail.district : ''}} {{order_detail.state ? ', '+order_detail.state : ''}}</p>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
                
                <div class="row ">
                    <div class="col s12">
                        <div class="heading-bg">
                            <h2>Order Item</h2>
                        </div>
                        <div class="cs-table left-right-10">
                            <div class="table-head">
                                <table class="sno-border">
                                    <tr>
                                        <th class="w40 text-center"></th>
                                        <th>Product Description</th>
                                        <th class="w80">QTY</th>
                                        <th class="w90">Rate</th>
                                        <th class="w100" >Sub-Total</th>
                                        <th class="w120" >Discount</th>
                                        <th class="w140 text-right"> Amount</th>
                                    </tr>
                                </table>
                            </div>
                            
                            <div class="table-container">
                                <div class="table-content">
                                    <table class="sno-border">
                                        <tr *ngFor="let list of order_item; let i=index">
                                            <td class="w40 text-center">{{i+1}}</td>
                                            <td>{{list.product_name}} {{list.cat_no}}</td>
                                            <!-- *ngIf="(order_detail.order_status=='Pending')" -->
                                            <td class="w80" *ngIf="(order_detail.order_status=='Pending')">
                                                <div class="td-input" [ngClass]="{'active':list.editqty==true}">
                                                    <input type="number" class="input-bdr" value="{{list.qty}}"  name="qty" #qty="ngModel" [(ngModel)]="list.qty" (ngModelChange)="calc(list.id,list.qty)" [readonly]="!list.editqty">
                                                    <div class="edit">
                                                        <a class="edit-icon edit" *ngIf="list.editqty == false">
                                                            <i class="material-icons" (click)="list.editqty = true">create</i>
                                                        </a>
                                                        <a class="edit-icon save" *ngIf="list.editqty == true">
                                                            <i class="material-icons" (click)="list.editqty = false;update_order(list.id)">save</i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="w80" *ngIf="(order_detail.order_status!='Pending')">{{list.qty}}</td>
                                            
                                            <td class="w90">&#8377; {{list.price}}</td>
                                            <td class="w100" >&#8377; {{list.sub_total}}</td>
                                            <td class="w120 " >&#8377;  {{list.discount_amount * list.qty}}({{list.discount_percent}}%)</td>
                                            <td class="w140 text-right">&#8377;  {{list.amount}}
                                                
                                            </td>
                                            
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col s8">&nbsp;</div>
                    <div class="col s4">
                        <div class="invoice-table">
                            <table>
                                
                                
                                <tr >
                                    <td>Sub Amount</td>
                                    <td class="w30 text-center">:</td>
                                    <td class="w200 text-right ">&#8377; {{order_detail.sub_total}}</td>
                                </tr>
                                <tr >
                                    <td>Discount</td>
                                    <td class="text-center">:</td>
                                    <td class="text-right ">&#8377; {{order_detail.order_discount}}</td>
                                </tr>
                                <tr >
                                    <td>Net Total</td>
                                    <td class="text-center">:</td>
                                    <td class="text-right ">&#8377; {{order_detail.order_total}}</td>
                                </tr>
                                
                                <tr *ngIf="order_detail.sp_type">
                                    <td *ngIf="order_detail.sp_type=='Discount'">Special Discount</td>
                                    <td *ngIf="order_detail.sp_type=='Premium'">Additional Charges</td>
                                    <td class="text-center">:</td>
                                    <td class="text-right ">&#8377; {{order_detail.special_discount_amount}}</td>
                                </tr>
                                
                                
                                <tr >
                                    <td>Grand Total</td>
                                    <td class="text-center">:</td>
                                    <td class="text-right ">&#8377; {{order_detail.order_grand_total}}</td>
                                </tr>
                                <tr >
                                    <td>Breakup of Grand Total</td>
                                    <td class="text-center">:</td>
                                    <td class="text-right ">(&#8377;{{order_detail.netBreakup}},GST(18%) : &#8377;{{order_detail.gstBreakup}}) </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    